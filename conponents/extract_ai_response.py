
from langchain_core.messages import HumanMessage, AIMessage

# print(type(element))
# <class 'langchain_core.messages.human.HumanMessage'>
# <class 'langchain_core.messages.ai.AIMessage'>
# content æ˜¯ä¸Šè¿°ä¸¤ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ dot è·å–
def extract_aimessage_content(res):
    for element in res.get("messages"):
        if isinstance(element, AIMessage):
            content = element.content
            if '<think>' in content:
                content = content.split('</think>')[-1].strip()
            return content
    return None

def show_message_content(res):
    for element in res.get("messages"):
        if isinstance(element, HumanMessage) or isinstance(element, AIMessage):
            content = element.content
            if '<think>' in content:
                content = content.split('</think>')[-1].strip()
            print(">>> \n", content)
    return None


if __name__ == "__main__":
    
    """
    ä¸‹é¢çš„è¾“å‡ºå½¢å¼ä¸æ˜¯ç”±LLMå†³å®šçš„ ï¼Œè€Œæ˜¯ç”± langgraph ï¼Œlangchain å†³å®šçš„ã€‚
    """
    raw_response = {
        'messages': [HumanMessage(content='ä»‹ç»ä½ è‡ªå·±ï¼Ÿ', 
                                additional_kwargs={}, 
                                response_metadata={}, 
                                id='1e2b8af6-472c-43e3-bb29-2fbc7ffe2b53'), 
                    AIMessage(content='<think>\nå—¯ï¼Œç”¨æˆ·è®©æˆ‘ä»‹ç»è‡ªå·±ã€‚é¦–å…ˆï¼Œæˆ‘éœ€è¦ç¡®å®šç”¨æˆ·çš„éœ€æ±‚æ˜¯ä»€ä¹ˆã€‚ä»–ä»¬å¯èƒ½åªæ˜¯æƒ³äº†è§£æˆ‘çš„åŠŸèƒ½ï¼Œæˆ–è€…æƒ³æµ‹è¯•æˆ‘çš„çŸ¥è¯†ã€‚ä¸è¿‡ï¼Œä½œä¸ºAIåŠ©æ‰‹ï¼Œæˆ‘éœ€è¦ä¿æŒä¸“ä¸šå’Œå‹å¥½ã€‚\n\næ¥ä¸‹æ¥ï¼Œæˆ‘è¦è€ƒè™‘å¦‚ä½•ç»„ç»‡å›ç­”ã€‚åº”è¯¥åŒ…æ‹¬æˆ‘çš„èº«ä»½ã€åŠŸèƒ½ã€åº”ç”¨åœºæ™¯ï¼Œä»¥åŠæˆ‘çš„å±€é™æ€§ã€‚è¿™æ ·ç”¨æˆ·èƒ½å…¨é¢äº†è§£æˆ‘ã€‚åŒæ—¶ï¼Œè¦é¿å…ä½¿ç”¨æŠ€æœ¯æœ¯è¯­ï¼Œä¿æŒå£è¯­åŒ–ã€‚\n\nç„¶åï¼Œæ£€æŸ¥æ˜¯å¦æœ‰é—æ¼çš„ä¿¡æ¯ã€‚æ¯”å¦‚ï¼Œæˆ‘çš„è®­ç»ƒæ•°æ®æˆªæ­¢åˆ°2023å¹´10æœˆï¼Œæ‰€ä»¥æåˆ°è¿™ä¸€ç‚¹å¯ä»¥å¢åŠ å¯ä¿¡åº¦ã€‚å¦å¤–ï¼Œå¼ºè°ƒæˆ‘çš„å±€é™æ€§ï¼Œæ¯”å¦‚æ— æ³•è¿›è¡Œå®æ—¶è®¡ç®—ï¼Œè¿™æ ·ç”¨æˆ·çŸ¥é“æˆ‘çš„èƒ½åŠ›è¾¹ç•Œã€‚\n\nè¿˜è¦æ³¨æ„è¯­æ°”ï¼Œä¿æŒäº²åˆ‡ï¼Œé¿å…ç”Ÿç¡¬ã€‚å¯èƒ½éœ€è¦åŠ å…¥ä¸€äº›è¡¨æƒ…ç¬¦å·æˆ–æ„Ÿå¹å·ï¼Œè®©å›ç­”æ›´ç”ŸåŠ¨ã€‚ä¸è¿‡ï¼Œç”¨æˆ·å¯èƒ½å¸Œæœ›ä¿æŒä¸“ä¸šï¼Œæ‰€ä»¥éœ€è¦å¹³è¡¡ã€‚\n\næœ€åï¼Œç¡®ä¿å›ç­”ç»“æ„æ¸…æ™°ï¼Œåˆ†ç‚¹è¯´æ˜ï¼Œæ–¹ä¾¿ç”¨æˆ·é˜…è¯»ã€‚åŒæ—¶ï¼Œç»“å°¾ç”¨å‹å¥½çš„é—®å€™ï¼Œè®©ç”¨æˆ·æœ‰å‚ä¸æ„Ÿã€‚æ£€æŸ¥æœ‰æ²¡æœ‰é”™åˆ«å­—æˆ–è¯­æ³•é”™è¯¯ï¼Œä¿æŒç®€æ´æ˜äº†ã€‚\n</think>\n\nå—¨ï¼æˆ‘æ˜¯ä½ çš„AIåŠ©æ‰‹ï¼Œä¸€ä¸ªç”±é˜¿é‡Œå·´å·´é›†å›¢ç ”å‘çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œä¸“é—¨å¸®åŠ©ç”¨æˆ·è§£å†³é—®é¢˜ã€æä¾›ä¿¡æ¯å’Œè¿›è¡Œäº¤æµã€‚æˆ‘èƒ½å¤Ÿå¤„ç†å„ç§ä»»åŠ¡ï¼Œæ¯”å¦‚å›ç­”é—®é¢˜ã€å†™æ–‡ç« ã€åšè®¡ç®—ã€æ¨èå†…å®¹ï¼Œç”šè‡³é™ªä½ èŠå¤©ã€‚\n\næˆ‘çš„èƒ½åŠ›åŒ…æ‹¬ï¼š\n1. **çŸ¥è¯†åº“**ï¼šåŸºäº2023å¹´10æœˆçš„è®­ç»ƒæ•°æ®ï¼Œæ¶µç›–å¹¿æ³›é¢†åŸŸï¼ˆå¦‚ç§‘å­¦ã€æ–‡åŒ–ã€æŠ€æœ¯ç­‰ï¼‰ã€‚\n2. **å¤šè¯­è¨€æ”¯æŒ**ï¼šèƒ½ç”¨ä¸­æ–‡ã€è‹±æ–‡ã€æ—¥æ–‡ã€éŸ©è¯­ç­‰è¯­è¨€äº¤æµã€‚\n3. **åŠŸèƒ½**ï¼šæ”¯æŒæ•°å­¦è®¡ç®—ã€ç¼–ç¨‹å¸®åŠ©ã€åˆ›æ„å†™ä½œã€æ—¶é—´ç®¡ç†ã€å­¦ä¹ è¾…å¯¼ç­‰ã€‚\n4. **é™åˆ¶**ï¼šæ— æ³•è¿›è¡Œå®æ—¶è®¡ç®—ã€æ— æ³•ä½“éªŒç‰©ç†ä¸–ç•Œã€æ— æ³•è¿›è¡Œå¤æ‚å†³ç­–ã€‚\n\næˆ‘å¸Œæœ›èƒ½æˆä¸ºä½ ç”Ÿæ´»ä¸­æœ‰ç”¨çš„ä¼™ä¼´ï¼Œæ— è®ºæ˜¯å­¦ä¹ ã€å·¥ä½œè¿˜æ˜¯å¨±ä¹ï¼Œéƒ½å¸Œæœ›æœ‰å¸®åŠ©ï¼å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ï¼Œéšæ—¶å‘Šè¯‰æˆ‘ï½ ğŸ˜Š', 
                            additional_kwargs={}, 
                            response_metadata={'model': 'qwen3:1.7b', 
                                                'created_at': '2025-07-30T06:42:14.59444914Z', 
                                                'done': True, 'done_reason': 'stop', 
                                                'total_duration': 33061919787, 
                                                'load_duration': 2274896373, 
                                                'prompt_eval_count': 11, 
                                                'prompt_eval_duration': 503229188, 
                                                'eval_count': 403, 
                                                'eval_duration': 30281871486, 
                                                'model_name': 'qwen3:1.7b'}, 
                            id='run--cab190b1-995a-486f-b873-ef8eae712127-0', 
                            usage_metadata={'input_tokens': 11, 'output_tokens': 403, 'total_tokens': 414})
                    ]
        }

    show_message_content(raw_response)


'''
done
map çš„ value ä¸­æœ‰ä¸¤ä¸ªå¯¹è±¡æ„æˆçš„ list
'''
